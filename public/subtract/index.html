<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Subtract</title>
	<link href="https://fonts.googleapis.com/css2?family=Inter:wght@200;300;400;700&display=swap" rel="stylesheet">
	<link rel="icon" type="image/png" href="./assets/favicon.svg">
	<link rel="stylesheet" href="style.css">
</head>
<body>
	<div class="view view-top">
		<div class="logo-container">
			<!-- SUBTRACT logo -->
			<img src="assets/SUBTRACT.svg" alt="SUBTRACT" class="logo fade-in" data-fade-delay="100">
		</div>
	</div>
	<div class="view view-bottom">
		<div class="content-container">
			<!-- a centered title with SF Pro Condensed Ultralight font -->
			<div class="text-container">
				<text class="text-item fade-in" data-fade-delay="800">Can one have a life without <span style="text-decoration: line-through; opacity: 0.5;">bullshit</span> subscriptions?</text>
				<text class="text-item fade-in" data-fade-delay="1000">Spend your money on what matters</text>
				<text class="text-item fade-in" data-fade-delay="1200">Enter the wait list</text>
			</div>
			<!-- a centered subtitle with SF Pro Condensed Ultralight font -->
			<div class="button-container fade-in" data-fade-delay="1500">
				<div class="input-group">
					<input id="emailInput" type="email" name="email" placeholder="Enter your email" class="email-input">
					<button id="submitButton" class="submit-button">SUBMIT</button>
				</div>
				<div id="feedback" class="feedback"></div>
			</div>
		</div>
		<!-- position absolute bottom right of the page -->
		<div class="footer-links">
			<!-- <text style="font-family: 'Inter', sans-serif; font-size: 12px; text-align: center; margin: 0; cursor: pointer;">What the f*ck are you talking about?</text> -->
			<!-- a link to the about me page -->
			<a href="../index.html" class="footer-link fade-in" data-fade-delay="1700">About Me</a>
			<a href="terms.html" class="footer-link fade-in" data-fade-delay="1900">Terms and Conditions</a>
			<a href="privacy.html" class="footer-link fade-in" data-fade-delay="2200">Privacy Policy</a>
		</div>	
	</div>
	
	<script>
		// Fade-in animation on page load
		document.addEventListener('DOMContentLoaded', function() {
			const fadeElements = document.querySelectorAll('.fade-in');
			
			fadeElements.forEach((element) => {
				// Get delay from data attribute or default to 0
				const delay = parseInt(element.getAttribute('data-fade-delay')) || 0;
				
				setTimeout(() => {
					element.classList.add('visible');
				}, delay);
			});
		});
		
		document.getElementById('submitButton').addEventListener('click', async function() {
			const emailInput = document.getElementById('emailInput');
			const feedback = document.getElementById('feedback');
			const email = emailInput.value.trim();
			
			// Reset feedback
			feedback.className = 'feedback';
			feedback.textContent = '';
			
			// Validate email
			if (!email) {
				feedback.className = 'feedback error';
				feedback.textContent = 'Please enter your email address';
				return;
			}
			
			const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
			if (!emailRegex.test(email)) {
				feedback.className = 'feedback error';
				feedback.textContent = 'Please enter a valid email address';
				return;
			}
			
			// Show loading state
			const button = document.getElementById('submitButton');
			const originalText = button.textContent;
			button.textContent = 'SENDING...';
			button.disabled = true;
			
			try {
				// Send email using FormSubmit.co
				const formData = new FormData();
				formData.append('email', 'tigulima@gmail.com');
				formData.append('subject', 'New Waitlist Sign Up - Subtract App');
				formData.append('message', `${email} has interest in the Subtract app!`);
				formData.append('_captcha', 'false');
				
				const response = await fetch('https://formsubmit.co/tigulima@gmail.com', {
					method: 'POST',
					body: formData,
					headers: {
						'Accept': 'application/json'
					}
				});
				
				if (response.ok) {
					feedback.className = 'feedback success';
					feedback.textContent = 'Thank you! You have been added to the waitlist.';
					emailInput.value = '';
				} else {
					throw new Error('Failed to submit');
				}
			} catch (error) {
				feedback.className = 'feedback error';
				feedback.textContent = 'Oops! Something went wrong. Please try again.';
			} finally {
				button.textContent = originalText;
				button.disabled = false;
			}
		});
		
		// Allow Enter key to submit
		document.getElementById('emailInput').addEventListener('keypress', function(e) {
			if (e.key === 'Enter') {
				document.getElementById('submitButton').click();
			}
		});
	</script>
</body>
</html>